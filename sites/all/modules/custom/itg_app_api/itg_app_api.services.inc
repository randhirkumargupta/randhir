<?php
/**
 * @file
 * INC file for APP API Schemes Services.
 * Contains the resource declarations for the service APIs
 * and other commons functions/hooks. if necessary
 */
/**
 * Function for APP API resource declaration. 
 */
function itg_app_api_resource() {

  /**
   * custom resource for sprit1
   */
  $api = array(
    // hamburger_menu custom resource declaration.....
    'hamburger_menu' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves hamburger_menu schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_hamburger_menu',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // horizontal_menu custom resource declaration.....
    'horizontal_menu' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves horizontal_menu schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_horizontal_menu',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              //'source' => array('param' => 'token'),
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // config_update_status custom resource declaration.....
    'config_update_status' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves config_update_status schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_config_update_status',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // master_config custom resource declaration.....
    'master_config' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves master_config schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_master_config',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // server_error_master custom resource declaration.....
    'server_error_master' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves server_error_master schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_server_error_master',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // photolist custom resource declaration.....
    'photolist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves photolist schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_photolist',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // photodetail custom resource declaration.....
    'photodetail' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves photodetail schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_photodetail',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // videolist custom resource declaration.....
    'videolist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves videolist schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_videolist',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // programlist custom resource declaration.....
    'programlist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves programlist schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_programlist',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // newslist custom resource declaration.....
    'newslist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves newslist schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_newslist',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // sprint 2 api start
    // photostorydetail custom resource declaration.....
    'photostorydetail' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves photostorydetail schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_photostorydetail',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // program_category_list custom resource declaration.....
    'program_category_list' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves program_category_list schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_program_category_list',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // ad_config_json custom resource declaration.....
    'ad_config_json' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves ad_config_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_ad_config_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_channellist_json custom resource declaration.....
    'livetv_channellist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_channellist_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_channellist_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_json custom resource declaration.....
    'livetv' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_indiatoday_json custom resource declaration.....
    'livetv_indiatoday' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_aajtak_json custom resource declaration.....
    'livetv_aajtak' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_delhiaajtak_json custom resource declaration.....
    'livetv_delhiaajtak' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // livetv_tej_json custom resource declaration.....
    'livetv_tej' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves livetv_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_livetv_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // otherapps_ios_json custom resource declaration.....
    'otherapps_ios' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves otherapps_ios_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_otherapps_ios_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // otherapps_android_json custom resource declaration.....
    'otherapps_android' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves otherapps_android_json schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_otherapps_android_json',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // magazine section start
    // magazine_edition custom resource declaration.....
    'magazine_edition' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves magazine_edition schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_magazine_edition',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // magazine_coverstories custom resource declaration.....
    'magazine_coverstories' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves magazine_coverstories schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_magazine_coverstories',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // magazine_editionlist custom resource declaration.....
    'magazine_editionlist' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves magazine_editionlist schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_magazine_editionlist',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // magazine section end
    // storydetail custom resource declaration.....
    'storydetail' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves storydetail schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_storydetail',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
    // homePage custom resource declaration.....
    'homePage' => array(
      'operations' => array(
        'retrieve' => array(
          'help' => 'Retrieves storydetail schemes info.',
          'file' => array(
            'type' => 'inc',
            'module' => 'itg_app_api',
            'name' => 'itg_app_api.services',
          ),
          'callback' => 'itg_app_api_homePage',
          'access callback' => 'user_access',
          'access arguments' => array('access content'),
          'access arguments append' => FALSE,
          'args' => array(
            array(
              'name' => 'token',
              'type' => 'string',
              'description' => 'Function to perform',
              'source' => array('path' => 0),
              'optional' => TRUE,
              'default' => '*',
            ),
          ),
        ),
      ),
    ),
  );

  return $api;
}

/**
 * resource callback function for sprit1
 */

/**
 * Call back function for newslist API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_newslist($token) {
  //valid tid & pageno
  $realtime = 0;
  $id = $_GET['id'];
  $cpageno = $_GET['cpageno'];
  $suffix = $id . "_" . $cpageno;
  if (!is_numeric($id)) {
    $id = 0;
  }
  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }

  $redis_key = "itgd_rapid_api_newslist_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $realtime = 1;
    $jsondata_realtime = $jsondata = newscategoryPageRerourceValue($id, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = RAPID_API_NEWSLIST_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }
  if ($realtime) {
    return $jsondata_realtime;
  }
  else {
    $jsondata = json_decode($jsondata);
    return $jsondata;
  }
}

/**
 * Call back function for programlist API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_programlist($token) {
  //valid tid & pageno
  $id = $_GET['id'];
  $cpageno = $_GET['cpageno'];
  $suffix = $id . "_" . $cpageno;
  if (!is_numeric($id)) {
    $id = 0;
  }
  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }

  $redis_key = "itgd_rapid_api_programlist_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = programcategoryPageRerourceValue($id, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for videolist API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_videolist($token) {
  //valid tid & pageno
  $id = $_GET['id'];
  $cpageno = $_GET['cpageno'];
  $suffix = $id . "_" . $cpageno;
  if (!is_numeric($id)) {
    $id = 0;
  }
  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }

  $redis_key = "itgd_rapid_api_videolist_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = videocategoryPageRerourceValue($id, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for photodetail API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_photodetail($token) {
  //valid id
  $id = $_GET['id'];
  //$cpageno = $_GET['cpageno'];
  $suffix = $id;
  if (!is_numeric($id)) {
    $id = 0;
  }

  $redis_key = "itgd_rapid_api_photodetail_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = photoDetailPageRerourceValue($id);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }
  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for photolist API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_photolist($token) {
  $id = $_GET['id'];
  $cpageno = $_GET['cpageno'];
  //valid tid & pageno
  $suffix = $id . "_" . $cpageno;
  if (!is_numeric($id)) {
    $id = 0;
  }
  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }

  $redis_key = "itgd_rapid_api_photolist_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = photocategoryPageRerourceValue($id, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for server_error_master API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_server_error_master($token) {
  $redis_key = "itgd_rapid_server_error_master_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('server_error_master_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for master_config API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_master_config($token) {
  $redis_key = "itgd_rapid_master_config_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('master_config_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for config_update_status API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_config_update_status($token) {
  $redis_key = "itgd_rapid_config_update_status_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('config_update_status_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;

  return $return_obj;
}

/**
 * Call back function for hamburger_menu API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_hamburger_menu($token) {
  $redis_key = "itgd_rapid_hamburger_menu_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('hamburger_menu_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;

  return $return_obj;
}

/**
 * Call back function for horizontal_menu API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_horizontal_menu($token) {
  $redis_key = "itgd_rapid_horizontal_menu_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('horizontal_menu_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;

  return $return_obj;
}

// sprint2 function start

/**
 * Call back function for _photostorydetail API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_photostorydetail($token) {
  //valid id
  $id = $_GET['id'];
  if (!is_numeric($id)) {
    $id = 0;
  }

  // call function for return data..

  $suffix = $id;
  $redis_key = "itg_app_api_photostorydetail_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = photoStoryDetailPageRerourceValue($id);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for program_category_list API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_program_category_list($token) {


  $redis_key = "itg_app_api_program_category_list";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = programCategoryListlPageRerourceValue();
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for ad_config_json API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_ad_config_json($token) {

  $redis_key = "itg_app_api_ad_config_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('ad_config_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for livetv_channellist_json API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_livetv_channellist_json($token) {


  $redis_key = "itg_app_api_livetv_channellist_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('livetv_channellist_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;

  return $return_obj;
}

/**
 * Call back function for livetv_json API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_livetv_json($token) {


  $redis_key = "itg_app_api_livetv_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('livetv_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for otherapps_ios_json API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_otherapps_ios_json($token) {


  $redis_key = "itg_app_api_otherapps_ios_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('otherapps_ios_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for otherapps_android_json API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_otherapps_android_json($token) {


  $redis_key = "itg_app_api_otherapps_android_json";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = variable_get('otherapps_android_json');
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

// magazine section start

/**
 * Call back function for magazine_edition API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_magazine_edition($token) {
  $id = $_GET['issueid'];
  $cpageno = $_GET['cpageno'];
  //valid tid & pageno
  if (!is_numeric($id)) {
    $id = 0;
  }
  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }


  $suffix = $id . "_" . $cpageno;
  $redis_key = "itg_app_api_magazine_edition_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = magazineEditionPageRerourceValue($id, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for magazine_coverstories API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_magazine_coverstories($token) {

  // call function from return data..

  $redis_key = "itg_app_api_magazine_coverstories";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    $jsondata = magazineCoverstoriesPageRerourceValue();
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $obj = json_decode($jsondata, TRUE);
  $return_obj = $obj;
  return $return_obj;
}

/**
 * Call back function for magazine_editionlist API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_magazine_editionlist($token) {
  $sdate = $_GET['sdate'];
  $tdate = $_GET['tdate'];
  $cpageno = $_GET['cpageno'];

  if (!is_numeric($cpageno)) {
    $cpageno = 0;
  }
  // call function from return data..


  $suffix = $sdate . "_" . $tdate . "_" . $cpageno;
  $redis_key = "itg_app_api_magazine_editionlist_" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = magazineEditionListPageRerourceValue($sdate, $tdate, $cpageno);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);

  return $jsondata;
}

// magazine section end

/**
 * Call back function for storydetail API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_storydetail($token) {
  //valid id
  $id = $_GET['id'];
  if (!is_numeric($id)) {
    $id = 0;
  }

  // call function for return data..


  $suffix = $id;
  $redis_key = "itg_app_api_storydetail" . $suffix;
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = StoryDetailPageRerourceValue($id);
    $jsondata = json_encode($jsondata);
    $ttl = DEFAULT_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

/**
 * Call back function for homePage API 
 * @pram $_GET
 * @return array - The processed information array.
 */
function itg_app_api_homePage($token) {

  $redis_key = "itg_app_api_homePage";
  $result_get = getRedis($redis_key);

  if ($result_get['key_value'] != "") {
    $jsondata = $result_get['key_value'];
  }
  else {
    // call function from return data..
    $jsondata = homePageJson();
    $jsondata = json_encode($jsondata);
    $ttl = RAPID_API_HOMEPAGE_REDIS_EXPIRE_TIME;
    $result_set = setRedis($redis_key, $jsondata, $ttl);
  }

  $jsondata = json_decode($jsondata, TRUE);
  return $jsondata;
}

